# Java多线程与并发

## 基础

### 编写线程运行时执行代码的两种方式
- 创建Thead的子类，并重写run方法
- 创建类的时候继承Runable接口 

*调用实例的run方法启动线程*

### Java线程执行时共享资源问题

#### 局部变量
> 局部变量存储在线程自己的栈中，也就是说，局部变量永远也不会被多个线程共享；
> 所以说基础类型的局部变量是线程安全的。

#### 局部的对象引用

> 对象的局部引用和基础类型的局部变量不太一样。所有的对象都在共享堆中，如果在某个方法中创建的对象不会
> 逃逸出（不会被其它方法获得）该方法，则它就是线程安全的。

实际上，哪怕将这个对象作为参数传给其它方法，只要别的线程获取不到这个对象，那它仍是线程安全的。如：
``` java

public void someMethod() {
	LoalObject lj = new LoalObject();

	lj.callMethod();
	method2(lj);
}

public void method2(LocalObject lj) {
	lj.setVlaue("value");
}

```
#### 对象成员

对象成员存储在堆上；非线程安全。

### 线程控制逃逸规则

> 如果一个资源的创建，使用销毁都在同一个县城内完成，且永远不会脱离该线程的控制，则该资源的使用就是线程安全的。

* 区分某个线程控制的对象是资源本身，还是仅仅到某个资源的引用很重要 *
